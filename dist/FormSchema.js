(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define("FormSchema",[],t):"object"===typeof exports?exports["FormSchema"]=t():e["FormSchema"]=t()})("undefined"!==typeof self?self:this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="./",r(r.s="iaYj")}({"03mN":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("6Nfi"),a=r("QE+O");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}var u={functional:!0,render:function(e,t){var r=t.props,u=t.slots,s=(t.listeners,r.input),l=r.field,c=r.value,p=void 0===c?l.attrs.value:c,d=r.name,f=void 0===d?l.attrs.name:d,m=(0,a.argName)(s),v={};return(0,n.merge)(v,s.data),v.$field=l,v[m]=i({},s.data[m]),v[m].name=f,v[m].value="object"===o(p)?p[f]:p,e(s.element.component,v,u().default)}};t.default=u},"6Nfi":function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var r=Object.keys(e);return r.length===Object.keys(t).length&&-1===r.findIndex(function(r){return!t.hasOwnProperty(r)||e[r]!==t[r]})}function u(e){return null===e||/string|number|boolean|undefined|function/.test(o(e))}function s(e,t){Object.keys(t).forEach(function(r){var o=t[r];u(o)?e[r]=o:a(o,Array)?e[r]=n(o):(e[r]||(e[r]={}),s(e[r],o))})}Object.defineProperty(t,"__esModule",{value:!0}),t.equals=i,t.isScalar=u,t.merge=s},Ma1Y:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("QE+O"),a=u(r("vUgH")),o=u(r("RWc7")),i=u(r("kHBZ"));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}var c={functional:!0,render:function(e,t){var r=t.props,u=t.listeners,c=r.field,p=r.value,d=void 0===p?c.attrs.value:p,f=(0,n.input)({field:c,listeners:u}),m=[];switch(c.attrs.type){case"textarea":f.element.native&&(delete f.data.attrs.type,delete f.data.attrs.value,f.data.domProps.innerHTML=d);break;case"radio":c.hasOwnProperty("items")&&c.items.forEach(function(t){m.push(e(o.default,{props:{item:t,value:d,field:l({},c,{label:t.label,isArrayField:!1})},on:u}))});break;case"checkbox":if(c.hasOwnProperty("items"))c.items.forEach(function(t){m.push(e(o.default,{props:{item:t,value:d,field:l({},c,{label:t.label}),checked:d.includes(t.value)},on:u}))});else if("boolean"===c.schemaType){var v={label:c.label},y=!0===d;return e(o.default,{props:{item:v,value:d,field:c,checked:y},on:u})}break;case"select":var h=s(c.items);c.attrs.required&&h.unshift({label:null,value:""}),f.element.native&&(delete f.data.attrs.type,delete f.data.attrs.value),h.forEach(function(t){m.push(e(i.default,{props:{field:c,value:d,option:t}}))});break}return e(a.default,{props:{field:c,value:d,input:f}},m)}};t.default=c},MjSB:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("QE+O"),a={functional:!0,render:function(e,t){var r=t.data,a=t.slots,o=a(),i=n.components.buttonswrapper;return o.default?e(i.component,r,o.default):e(i.component,[e(n.components.submitbutton.component,r)])}};t.default=a},"QE+O":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderFieldset=l,t.renderLabel=c,t.set=d,t.init=f,t.argName=m,t.input=y,t.inputName=t.fieldTypesAsNotArray=t.groupedArrayTypes=t.renderButton=t.components=void 0;var n=r("6Nfi");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function i(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var u={h1:["title"],p:["description"],div:["error","textgroup","buttonswrapper","formwrapper","inputswrapper","inputwrapper","defaultGroup"],legend:["legend"],fieldset:["radiogroup","checkboxgroup"],small:["inputdesc"],form:["form"],input:{typed:["checkbox","color","date","datetime","datetime-local","email","file","hidden","image","month","number","password","radio","range","search","tel","text","time","url","week"]},textarea:["textarea"],select:["select"],option:["option"],label:["label"],button:["submitbutton","arraybutton"]},s={};function l(e,t){var r=t.data,n=(t.props,t.slots),a=[e(s.inputswrapper.component,n().default)];return r.$field.description&&a.unshift(e(s.legend.component,{},r.$field.description)),e("fieldset",{attrs:{name:r.$field.attrs.name}},a)}function c(e,t){var r=t.data,n=t.props,a=t.slots,o=a().default||[],i=n.field||r.$field;return i.label?(o.unshift(e("span",{attrs:{"data-required-field":i.attrs.required?"true":"false"}},i.label)),e("label",o)):1===o.length?o[0]:o}t.components=s;var p=function(e,t){return function(r,n){var a=n.data;return a.attrs||(a.attrs={}),a.attrs.type=e,r("button",a,t)}};function d(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];s[e]={type:e,native:a,tagName:t,component:"string"===typeof t?{functional:!0,render:function(e,a){var o=a.data,i=a.slots,u=i().default||[];return(0,n.merge)(o,r),0===u.length&&0===Object.keys(o).length?null:e(t,o,u)}}:t}}function f(){var e=function(e){delete s[e],i(u[e],Array)?u[e].forEach(function(t){return d(t,e,{},!0)}):u[e].typed.forEach(function(t){d(t,e,{attrs:{type:t}},!0)})};for(var t in u)e(t);s.radiogroup.component.render=l,s.checkboxgroup.component.render=l,s.inputwrapper.component.render=c,s.submitbutton.component.render=p("submit","Submit"),s.arraybutton.component.render=p("button","Add")}function m(e){return e.native?"attrs":"props"}t.renderButton=p;var v=["radio","checkbox","input","textarea"];function y(e){var t,r=e.field,n=e.ref,i=e.$field,u=void 0===i?r:i,l=e.listeners,c=void 0===l?{}:l,p=r.attrs.type,d=r.hasOwnProperty("items")&&v.includes(p)?s["".concat(p,"group")]||s.defaultGroup:s[p]||s.text;return{ref:n,element:d,data:(t={$field:u,props:{},domProps:{}},a(t,m(d),o({},r.attrs)),a(t,"on",c),t)}}t.groupedArrayTypes=v;var h=["radio","textarea","select"];t.fieldTypesAsNotArray=h;var b=function(e,t){return"".concat(e.attrs.name,"-").concat(t)};t.inputName=b},RWc7:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("QE+O"),a=o(r("vUgH"));function o(e){return e&&e.__esModule?e:{default:e}}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}function u(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var s={functional:!0,render:function(e,t){var r=t.props,o=t.listeners,s=r.item,l=r.field,c=r.value,p=void 0===c?l.attrs.value:c,d=r.checked,f=r.disableWrappingLabel,m=l.attrs,v=s.description,y=(0,n.input)({ref:s.ref,field:{label:s.label,attrs:{name:s.name||m.name,type:m.type,value:"boolean"===l.schemaType?void 0:s.value,checked:"undefined"===typeof d?u(p,Array)?p.includes(s.value):s.value===p:d},$field:i({},l,{label:s.label})},listeners:o});return e(a.default,{props:{value:p,input:y,description:v,disableWrappingLabel:f,field:i({},l,{label:s.label})},on:y.data.listeners})}};t.default=s},SAX8:function(e,t,r){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.setCommonFields=o,t.loadFields=i,t.parseBoolean=u,t.parseString=s,t.parseItems=l,t.arrayOrderedValues=p,t.arrayUnorderedValues=d,t.singleValue=f,t.parseArray=m,t.setItemName=void 0;var a=["anyOf","oneOf","enum"];function o(e,t){t.attrs.value=t.attrs.hasOwnProperty("value")?t.attrs.value:e.default||"",t.schemaType=e.type,t.label=e.title||"",t.description=e.description||"",t.attrs.required=e.required||!1,t.attrs.disabled=e.disabled||!1}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e&&!1!==e.visible)switch(e.type){case"object":for(var n in e.properties){if(e.required){var o=!0,l=!1,c=void 0;try{for(var p,d=e.required[Symbol.iterator]();!(o=(p=d.next()).done);o=!0){var f=p.value;e.properties[f].required=!0}}catch(e){l=!0,c=e}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}}i(e.properties[n],t,n)}break;case"boolean":t.push(u(e,r));break;case"array":t.push(m(e,r));break;case"integer":case"number":case"string":for(var v=0;v<a.length;v++){var y=a[v];if(e.hasOwnProperty(y))return e.items={type:e.type,enum:e[y]},void t.push(m(e,r))}t.push(s(e,r));break}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={attrs:e.attrs||{}};return o(e,r),r.attrs.type||(r.attrs.type="checkbox"),r.attrs.hasOwnProperty("checked")||(r.attrs.checked=!0===e.default),delete r.attrs.value,t&&(r.attrs.name=t),r}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={attrs:e.attrs||{}};if(e.pattern&&(r.attrs.pattern=e.pattern),e.format)switch(e.format){case"email":r.attrs.type||(r.attrs.type="email");break;case"uri":r.attrs.type||(r.attrs.type="url");break}if(!r.attrs.type)switch(e.type){case"number":case"integer":r.attrs.type="number";break;default:r.attrs.type="text"}return o(e,r),t&&(r.attrs.name=t),e.minLength&&(r.attrs.minlength=e.minLength),e.maxLength&&(r.attrs.maxlength=e.maxLength),r}function l(e){return e.map(function(e){return"object"!==n(e)?{value:e,label:e}:e})}var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(r,n){return t&&(r.name=e),r.name||(r.name=e?"".concat(e,"-"):"",r.name+=r.label.replace(/\s+/g,"-")),e&&(r.ref="".concat(e,"-").concat(n)),r}};function p(e){return e.items.map(function(e){return e.checked?e.value:void 0})}function d(e){return e.items.filter(function(e){return e.checked||e.selected}).map(function(e){return e.value})}function f(e){var t=e.items.reverse().find(function(e){return e.checked||e.selected});return t?t.value:""}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={attrs:e.attrs||{}};o(e,r),t&&(r.attrs.name=t),r.items=[],r.minItems=parseInt(e.minItems)||1,r.maxItems=parseInt(e.maxItems)||1e3;e:for(var n=0;n<a.length;n++){var i=a[n];if(e.hasOwnProperty(i))switch(i){case"enum":r.attrs.type||(r.attrs.type="select"),r.items=l(e[i]),0===r.attrs.value.length&&(r.attrs.value="array"===r.schemaType?d(r):f(r));break e;case"oneOf":r.attrs.type="radio",r.attrs.value=r.attrs.value||"",r.items=l(e[i]).map(c(t,!0)),0===r.attrs.value.length&&(r.attrs.value=f(r));break e;case"anyOf":r.attrs.type="checkbox",r.attrs.value=r.attrs.value||[],r.items=l(e[i]).map(c(t)),r.isArrayField=!0,0===r.attrs.value.length&&(r.attrs.value=p(r));break e}}return r.attrs.type?"select"===r.attrs.type&&(r.attrs.multiple="array"===r.schemaType,r.attrs.value=r.attrs.value||r.attrs.multiple?[]:"",0===r.attrs.value.length&&(r.attrs.multiple?(r.isArrayField=!0,r.attrs.value=d(r)):r.attrs.value=f(r))):(r.isArrayField=!0,r.attrs.type="text"),r}t.setItemName=c},iaYj:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormSchema=t.setComponent=void 0;var n=r("SAX8"),a=r("6Nfi"),o=r("QE+O"),i=s(r("Ma1Y")),u=s(r("MjSB"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,o.init)();var c=o.set;t.setComponent=c;var p={name:"form-schema",props:{schema:{type:Object,required:!0},value:{type:Object,default:function(){return{}}},action:{type:String},autocomplete:{type:String},enctype:{type:String,default:"application/x-www-form-urlencoded"},method:{type:String,default:"post"},novalidate:{type:Boolean}},data:function(){return{schemaLoaded:{schema:{},fields:[]},default:{},error:null,data:{},inputValues:{}}},created:function(){this.init(this.schema)},watch:{schema:function(e,t){(0,a.equals)(e,t)||this.init(e)}},render:function(e){var t=this,r=this.schemaLoaded,n=r.schema,a=r.fields,s=[];n.title&&s.push(e(o.components.title.component,n.title)),n.description&&s.push(e(o.components.description.component,n.description)),this.error&&s.push(e(o.components.error.component,this.error));var c,p=a.map(function(r){var n=t.data[r.attrs.name];return e(i.default,{props:{field:r,value:n},on:{input:function(e){var n=e.target,a=e.target.value,o={field:r,data:a,target:n};r.isArrayField?t.onInputArrayValue(o):t.onInput(o)},change:function(e){var n=e.target,a=e.target.value,o={field:r,data:a,target:n};r.isArrayField?t.onInputArrayValue(o,!1):t.onInput(o,!1),t.changed()}}})});p.length&&(p.push(e(u.default,this.$slots.default)),s.push(e(o.components.form.component,(c={ref:"__form"},l(c,(0,o.argName)(o.components.form),{action:this.action,enctype:this.enctype,method:this.method,autocomplete:this.autocomplete,novalidate:this.novalidate}),l(c,"on",{reset:this.reset,submit:this.submit,invalid:this.invalid}),c),p)));return e(o.components.formwrapper.component,s)},setComponent:c,methods:{init:function(e){var t=[];(0,n.loadFields)(e,t),this.loadDefaultValues(t),this.schemaLoaded={schema:e,fields:t}},loadDefaultValues:function(e){var t=this;this.default={},this.inputValues={},e.forEach(function(e){var r=e.attrs,n=r.type,a=r.name;t.default[a]="boolean"===e.schemaType?"boolean"===typeof t.value[a]?t.value[a]:!0===e.attrs.checked:t.value[a]||e.attrs.value,e.isArrayField&&(Array.isArray(t.default[a])?t.default[a]=t.default[a].filter(function(r,n){return t.inputValues[(0,o.inputName)(e,n)]=r,void 0!==r}):t.default[a]=[],e.itemsNum="checkbox"===n?e.items.length:e.minItems)});var r={};(0,a.merge)(r,this.default),this.data=r,this.$emit("input",this.data)},onInput:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"boolean"===e.field.schemaType&&(e.data=e.target.checked),this.data[e.field.attrs.name]=e.data,t&&this.$emit("input",this.data)},onInputArrayValue:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("checkbox"===e.field.attrs.type)if(e.target.checked)this.data[e.field.attrs.name].includes(e.data)||this.data[e.field.attrs.name].push(e.data);else{var r=this.data[e.field.attrs.name].indexOf(e.data);r>-1&&this.data[e.field.attrs.name].splice(r,1)}else{var n=e.target.getAttribute("data-fs-index"),a=(0,o.inputName)(e.field,n);this.inputValues[a]=e.data;for(var i=[],u=0;u<e.field.itemsNum;u++){var s=this.inputValues[(0,o.inputName)(e.field,u)];s&&i.push(s)}this.data[e.field.attrs.name]=i}t&&this.$emit("input",this.data)},changed:function(){(0,a.equals)(this.data,this.default)||this.$emit("change",this.data)},form:function(){return this.$refs.__form},reportValidity:function(){for(var e=this.form().elements,t=!0,r=0;r<e.length;r++)"checkValidity"in e[r]&&(t=t&&e[r].checkValidity());return t},checkValidity:function(){return this.reportValidity()},invalid:function(e){this.$emit("invalid",e)},reset:function(){var e=this;for(var t in this.inputValues)delete this.inputValues[t];this.schemaLoaded.fields.forEach(function(t){var r=t.attrs.name;e.$set(e.data,r,e.default[r]),t.isArrayField&&e.data[r].forEach(function(r,n){e.inputValues[(0,o.inputName)(t,n)]=r})})},submit:function(e){this.checkValidity()&&this.$emit("submit",e)},setErrorMessage:function(e){this.error=e},clearErrorMessage:function(){this.error=null}}};t.FormSchema=p;var d=p;t.default=d},kHBZ:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("QE+O");function a(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var o={functional:!0,render:function(e,t){var r=t.props,o=r.option,i=r.value,u={label:o.label,attrs:{value:o.value,selected:a(i,Array)?i.includes(o.value):"undefined"===typeof i?o.selected||!1:o.value===i}},s=(0,n.input)({field:u}).data;return e(n.components.option.component,s,o.label)}};t.default=o},vUgH:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("QE+O"),a=o(r("03mN"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u={functional:!0,render:function(e,t){var r=t.props,o=t.slots,u=t.listeners,s=r.description,l=r.field,c=r.value,p=void 0===c?l.attrs.value:c,d=r.input,f=r.disableWrappingLabel,m=o().default||[],v=s||l.description,y=v?e(n.components.inputdesc.component,v):null;if(l.isArrayField&&"select"!==l.attrs.type){var h;if("checkbox"===l.attrs.type){var b=l.attrs.name,g={props:{name:b,field:l,value:p,input:d},on:u};return e(n.components.inputwrapper.component,g,[e(a.default,g,m),y])}var O=Array.apply(null,Array(l.itemsNum)).map(function(t,r){var o=(0,n.inputName)(l,r);return d.data.attrs["data-fs-index"]=r,e(a.default,{props:{name:o,field:l,value:p,input:d},on:u},m)}),k=n.components.arraybutton,S=(h={},i(h,(0,n.argName)(k),{disabled:l.maxItems<=l.itemsNum}),i(h,"on",{click:function(){l.itemsNum<l.maxItems&&l.itemsNum++}}),h);return O.push(e(k.component,S)),O.push(y),e(n.components.inputwrapper.component,{props:{field:l}},[e(n.components.inputswrapper.component,{props:{field:l}},O)])}var w=[e(d.element.component,d.data,m),y];return f?w:e(n.components.inputwrapper.component,{props:{field:l}},w)}};t.default=u}})["default"]});
//# sourceMappingURL=FormSchema.js.map